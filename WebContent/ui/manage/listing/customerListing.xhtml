<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/common/commonLayout.xhtml">
                
   <ui:define name="content">
   		<h:form id="customerTableForm">
   		
   		<p:growl escape="false" globalOnly="true" life="5000"

				showDetail="true" />
				<p:messages autoUpdate="true" />
   		
   			<h:panelGrid>
   				<p:commandLink action="manageCustomer" immediate="true" update="@form">
   					<h:panelGrid columns="2">
   						<h:graphicImage name="images/add.png" styleClass="addIcon" />
						<h:outputText value="Add New Customer" styleClass="command-link" />
   					</h:panelGrid>
   				</p:commandLink>
   			</h:panelGrid>	
   			<br />
	
			<p:dataTable var="customer" value="#{ManageCustomerActionBean2.customerList}" id="customerTable" paginator="true" rows="10" style="width:100%" widgetVar="studentTable"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15"
				rowKey="#{customer.id}" reflow="true" rowIndexVar="var" paginatorPosition="bottom">
				<p:column headerText="No" width="2%">
					<h:outputText value="#{var+1}" />
				</p:column>
				<p:column headerText="First Name" filterBy="#{customer.firstName}" filterMatchMode="contains">
					<h:outputText value="#{customer.firstName}" />
				</p:column>
				<p:column headerText="Last Name" filterMatchMode="contains">
					<h:outputText value="#{customer.lastName}" />
				</p:column>
				<p:column headerText="Father Name">
					<h:outputText value="#{customer.fatherName}" />
				</p:column>
				<p:column headerText="Phone">
					<h:outputText value="#{customer.phone}" />
				</p:column>
				<p:column headerText="Email">
					<h:outputText value="#{customer.email}" />
				</p:column>
				<p:column headerText="Date Of Birth">
					<h:outputText value="#{ManageCustomerActionBean2.formatDate(customer.dateOfBirth)}" />
				</p:column>
				<p:column headerText="Resident Address">
					<h:outputText value="#{customer.residentAddress}" />
				</p:column>
				<p:column style="width:4%;">
					<p:commandButton styleClass="green-button" icon="fa fa-paint-brush"  process="@this" update=":customerTableForm"  action="#{ManageCustomerActionBean2.preparedUpdateCustomer(customer)}"/>
				</p:column>
				<p:column style="width:4%;">
					<p:commandButton styleClass="red-button" icon="fa fa-times"  oncomplete="PF('customerTable').filter();" action="#{ManageCustomerActionBean2.deleteCustomer(customer)}"
						update=":customerTableForm">
						<p:confirm header="Confirmation" message="are you sure to delete??" icon="fa fa-exclamation-triangle" />
					</p:commandButton>
				</p:column>
				<p:column style="width:4%;">
					 <p:commandButton type="black-button" icon="fa fa-print"  oncomplete="PF('pdfDialog').show()" action="#{ManageCustomerActionBean2.generateReport(customer)}"
					 update="pdfForm" style="float:right;"/>
				</p:column>
			</p:dataTable>
		</h:form>
		<!-- <p:column style="width:4%;">
			 <p:commandButton type="black-button" icon="fa fa-file-excel-o"  oncomplete="PF('excelDialog').show()" action="#{ManageCustomerActionBean.generateExcel(customer)}"
			 update="excelForm" style="float:right;"/>
		</p:column> -->
		
		<!-- Confirmation Dialog -->
		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
			<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
			<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-times" />
		</p:confirmDialog>
		
		<p:dialog modal="true" responsive="true" appendTo="@(body)" dynamic="true" id="pdfDialog" resizable="false" widgetVar="pdfDialog" width="60%" height="550">
            <h:form enctype="multipart/form-data" id="pdfForm">
                <p:media cache="false" id="pdfPlayer" player="pdf" width="99%" height="500" value="#{ManageCustomerActionBean2.stream}"/>
            </h:form>
        </p:dialog>
        
        <!-- <p:dialog modal="true" responsive="true" appendTo="@(body)" dynamic="true" id="excel" resizable="false" widgetVar="excelDialog" width="60%" height="550">
            <h:form enctype="multipart/form-data" id="excelForm">
                <p:media cache="false" id="excelPlayer" player="excel" width="99%" height="500" value="#{ManageCustomerActionBean.streamExcel}"/>
            </h:form>
        </p:dialog> -->
   </ui:define>             
           
</ui:composition>